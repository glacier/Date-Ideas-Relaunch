 <% @user ||= current_user %>

<% title @user.first_name + "'s profile" %>

<p id="notice"><%= notice %></p>
<h1> <%= @user.first_name %>'s profile</h1>
<p>
	<%= image_tag avatar_url(current_user) %>
</p>

<!-- 
if current user is not the user shown in the profile then
	add follow button if the user is not being followed by current_user
else
	add unfollow button
end
 -->

<p>TODO: add follow/unfollow button </p>

<%= form_for @user.relationships.build(:followed_id => @user.id) do |f| %>
	<%= f.submit "Follow" %>
<% end %>

<p>
	<b>Email:</b>
	<%= current_user.email %>
</p>
<p>
  <b>Anniversary:</b>
  <%= @profile.anniversary %>
</p>

<p>
  <b>About <%= @profile.user.first_name %>:</b>
  <%= @profile.about_me %>
</p>

<p> stats </p>

<!-- follow/unfollow -->
<div class="Stats">
	<table summary="User stats">
		<tr>
			<td>
				<a href="<%= following_user_path(@user) %>">
					<span id="following" class="stat">
						<%= @user.following.count %> following
					</span>
				</a>
			</td>
			<td>
				<a href="<%= followers_user_path(@user) %>">
					<span id="followers" class="stat">
						<%= pluralize(@user.followers.count, "follower") %>
					</span>
				</a>
			</td>
		</tr>
	</table>
</div>
<%= link_to 'Edit', edit_profile_path(@profile) %>
<!-- debug -->

<%	
unless @user.nil?
	@user
%>
<% else %>
User is nil
<% end %>

